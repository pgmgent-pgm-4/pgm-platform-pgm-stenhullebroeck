{"version":3,"sources":["../../../src/api/controllers/auth.controller.js"],"names":["login","req","res","next","passport","authenticate","err","authenticated","info","status","json","signup","logout","logoutError","session","destroy","sessionError","body","error"],"mappings":";;;;;;;;;;;;;AACA;;AAGA;;AAJA;AAGA;AAGA,IAAMA,KAAK,GAAG,SAARA,KAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChCC,uBAASC,YAAT,CAAsB,OAAtB;AAAA,6FAA+B,iBAAOC,GAAP,EAAYC,aAAZ,EAA2BC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,oBAEvBF,GAAG,IAAI,CAACC,aAFe;AAAA;AAAA;AAAA;;AAAA,oBAGnBD,GAHmB;;AAAA;AAAA,+CAMpBJ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,aAArB,CANoB;;AAAA;AAAA;AAAA;AAAA,+CAQpB,yCAAuBJ,IAAvB,CARoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA/B;;AAAA;AAAA;AAAA;AAAA,OAUGF,GAVH,EAUQC,GAVR,EAUaC,IAVb;AAWD,CAZD;;AAcA,IAAMQ,MAAM;AAAA,4FAAG,kBAAOV,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AACbC,iCAASC,YAAT,CAAsB,QAAtB;AAAA,wGAAgC,kBAAOC,GAAP,EAAYC,aAAZ,EAA2BC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,8BAExBF,GAAG,IAAI,CAACC,aAFgB;AAAA;AAAA;AAAA;;AAAA,8BAGpBD,GAHoB;;AAAA;AAAA,0DAMrBJ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,aAArB,CANqB;;AAAA;AAAA;AAAA;AAAA,0DAQrB,0CAAuBJ,IAAvB,CARqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAhC;;AAAA;AAAA;AAAA;AAAA,iBAUGF,GAVH,EAUQC,GAVR,EAUaC,IAVb;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAANQ,MAAM;AAAA;AAAA;AAAA,GAAZ;;AAcA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACX,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjC,MAAI;AACF,QAAI,OAAOF,GAAG,CAACW,MAAX,KAAsB,UAA1B,EAAsC;AACpCX,MAAAA,GAAG,CAACW,MAAJ,CAAW,UAACC,WAAD,EAAiB;AAC1B,YAAIA,WAAJ,EAAiB;AACf,gBAAMA,WAAN;AACD;;AACDZ,QAAAA,GAAG,CAACa,OAAJ,CAAYC,OAAZ,CAAoB,UAACC,YAAD,EAAkB;AACpC,cAAIA,YAAJ,EAAkB;AAChB,kBAAMA,YAAN;AACD;;AACDf,UAAAA,GAAG,CAACa,OAAJ,GAAc,IAAd;AACD,SALD;AAMD,OAVD;AAWD;;AACD,WAAOZ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,GAAG,CAACgB,IAAzB,CAAP;AACD,GAfD,CAeE,OAAOC,KAAP,EAAc;AACd,WAAO,4BAAgBA,KAAhB,EAAuBf,IAAvB,CAAP;AACD;AACF,CAnBD;;eAqBe;AACbH,EAAAA,KAAK,EAALA,KADa;AAEbY,EAAAA,MAAM,EAANA,MAFa;AAGbD,EAAAA,MAAM,EAANA;AAHa,C","sourcesContent":["// Import external modules\r\nimport passport from 'passport';\r\n\r\n// Import custom modules\r\nimport { handleHTTPError, HTTPError } from '../../utils';\r\n\r\nconst login = (req, res, next) => {\r\n  passport.authenticate('login', async (err, authenticated, info) => {\r\n    try {\r\n      if (err || !authenticated) {\r\n        throw err;\r\n      }\r\n\r\n      return res.status(200).json(authenticated);\r\n    } catch (error) {\r\n      return handleHTTPError(error, next);\r\n    }\r\n  })(req, res, next);\r\n};\r\n\r\nconst signup = async (req, res, next) => {\r\n  passport.authenticate('signup', async (err, authenticated, info) => {\r\n    try {\r\n      if (err || !authenticated) {\r\n        throw err;\r\n      }\r\n\r\n      return res.status(200).json(authenticated);\r\n    } catch (error) {\r\n      return handleHTTPError(error, next);\r\n    }\r\n  })(req, res, next);\r\n};\r\n\r\nconst logout = (req, res, next) => {\r\n  try {\r\n    if (typeof req.logout === 'function') {\r\n      req.logout((logoutError) => {\r\n        if (logoutError) {\r\n          throw logoutError;\r\n        }\r\n        req.session.destroy((sessionError) => {\r\n          if (sessionError) {\r\n            throw sessionError;\r\n          }\r\n          req.session = null;\r\n        });\r\n      });\r\n    }\r\n    return res.status(200).json(req.body);\r\n  } catch (error) {\r\n    return handleHTTPError(error, next);\r\n  }\r\n};\r\n\r\nexport default {\r\n  login,\r\n  logout,\r\n  signup,\r\n};\r\n"],"file":"auth.controller.js"}